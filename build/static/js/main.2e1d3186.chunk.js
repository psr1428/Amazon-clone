(this["webpackJsonpamazon-clone"]=this["webpackJsonpamazon-clone"]||[]).push([[0],{116:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(50),l=t.n(c),o=(t(65),t(51)),s=t(3),i=(t(66),t(53)),m=t.n(i),u=t(54),d=t.n(u),p=t(5),E=t(9),g=Object(n.createContext)(),h=function(e){var a=e.reducer,t=e.initialState,c=e.children;return r.a.createElement(g.Provider,{value:Object(n.useReducer)(a,t)},c)},v=function(){return Object(n.useContext)(g)},f=t(29),b=t(19),j=t.n(b),O=t(25);var _=function(){return Object(p.f)(),r.a.createElement("div",null,r.a.createElement(f.GoogleLogout,{clientId:"275245150183-tgs5rega6rkc2qfp2u9mbsjodc6budua.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){window.location.replace("/"),console.log("User Logged out")}}))},k=t(32),N=t.n(k),y=N.a.initializeApp({apiKey:"AIzaSyApivTPnBnyGOlyzSEo7D4cEbdS7Qw_aLA",authDomain:"clone1-4e27e.firebaseapp.com",databaseURL:"https://clone1-4e27e.firebaseio.com",projectId:"clone1-4e27e",storageBucket:"clone1-4e27e.appspot.com",messagingSenderId:"889550157625",appId:"1:889550157625:web:40467e03f2fc1944d15ae8",measurementId:"G-V3CCJ6WL0F"}).firestore(),S=N.a.auth(),w=new N.a.auth.GoogleAuthProvider;w.setCustomParameters({prompt:"select_account"});t(82);var x=t(18),C=t.n(x),A=t(52),I=t.n(A);t(40);var T=function(){var e=v(),a=Object(s.a)(e,2),t=a[0],n=t.basket,c=t.name,l=a[1],o=n.map((function(e){return{value0:e.image,value:e.title,value1:e.price,value2:e.rating,value3:e.id}}));return r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("h5",null,"Hello ",c||"Guest")),o.map((function(e){return r.a.createElement("div",{className:"checkout-prod-image"},r.a.createElement("img",{className:"checkout-images",src:e.value0,alt:""}),r.a.createElement("div",{className:"checkout-prod-info"},r.a.createElement("h3",null,e.value),r.a.createElement("h3",null,r.a.createElement("small",null,"$"),e.value1),r.a.createElement(C.a,{rating:e.value2,starDimension:"20px"}),r.a.createElement("button",{onClick:function(){return a=e.value3,console.log(a),void l({type:"Remove-basket",id:a});var a}},"Remove from basket")))})))},z=t(23),B=t.n(z);t(88);var L=function(e){var a,t=e.order;return r.a.createElement("div",{className:"order"},r.a.createElement("p",null,I.a.unix(t.data.created).format("MMMM Do YYYY, h:mma")),r.a.createElement("p",{className:"order__id"},r.a.createElement("small",null,t.id)),null===(a=t.data.basket)||void 0===a?void 0:a.map((function(e){return r.a.createElement("div",null,r.a.createElement("img",{className:"image",src:e.image,alt:""}),r.a.createElement("div",{className:"checkout-prod-info"},r.a.createElement("h3",null,e.title),r.a.createElement("h3",null,r.a.createElement("small",null,"$"),e.price),r.a.createElement(C.a,{rating:e.rating,starDimension:"20px"})))})),r.a.createElement(B.a,{renderText:function(e){return r.a.createElement("h3",{className:"order__total"},"Order Total: ",e)},decimalScale:2,value:t.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"}))};var F=function(){var e=v(),a=Object(s.a)(e,2),t=a[0],c=(t.basket,t.user),l=(a[1],Object(n.useState)()),o=Object(s.a)(l,2),i=o[0],m=o[1];return Object(n.useEffect)((function(){c?y.collection("users").doc(null===c||void 0===c?void 0:c.email).collection("orders").orderBy("created","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):m([])}),[c]),r.a.createElement("div",{className:"order"},r.a.createElement("h1",null,"Your Orders"),r.a.createElement("div",{className:"order-container"},null===i||void 0===i?void 0:i.map((function(e){return r.a.createElement(L,{order:e})}))))};var H=function(){var e=v(),a=Object(s.a)(e,2),t=a[0],n=t.basket,c=t.name,l=t.user,o=(a[1],Object(p.f)(),function(){l&&S.signOut()});return r.a.createElement("div",{className:"header"},r.a.createElement(E.b,{to:"/"},r.a.createElement("img",{className:"header-logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png"})),r.a.createElement("div",{className:"header-search"},r.a.createElement("input",{className:"header-search_Input",type:"text"}),r.a.createElement(m.a,{className:"header_searchIcon"})),r.a.createElement("div",{className:"header-nav"},r.a.createElement(E.b,{to:"/Login"},r.a.createElement("div",{onClick:o,className:"header-option"},r.a.createElement("span",{className:"header-optionInspanOne"},"Hello ",l?c:"Guest"),r.a.createElement("span",{className:"header-optionInspanTwo"},l?r.a.createElement("div",{onClick:function(){window.location.reload(!1)}},"SignOut"):"SignIn"))),r.a.createElement(E.b,{to:"/orders"},r.a.createElement("div",{className:"header-option"},r.a.createElement("span",{className:"header-optionInspanOne"},"Returns"),r.a.createElement("span",{className:"header-optionInspanTwo"},"Orders"))),r.a.createElement("div",{className:"header-option"},r.a.createElement("span",{className:"header-optionInspanOne"},"Your"),r.a.createElement("span",{className:"header-optionInspanTwo"},"Prime")),r.a.createElement(E.b,{to:"/checkout"},r.a.createElement("div",{className:"header-optionBasket"},r.a.createElement(d.a,null),r.a.createElement("span",{className:"header-optionInspanTwo header-basketcount"},n.length))),r.a.createElement(_,{onClick:o}),r.a.createElement("div",null)))},P=(t(90),t(31));t(91);var G=function(e){var a=e.title,t=e.image,n=e.price,c=e.rating,l=e.id,o=v(),i=Object(s.a)(o,2),m=(i[0].basket,i[1]);return r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"product-info"},r.a.createElement("p",null,a),r.a.createElement("p",{className:"product-price"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,n)),r.a.createElement("div",{className:"product-rating"},r.a.createElement(C.a,{rating:c,starDimension:"20px"}))),r.a.createElement("img",{src:t,alt:""}),r.a.createElement("button",{onClick:function(){m({type:"ADD-TO-BASKET",item:Object(P.a)({id:l,title:a,image:t,price:n,rating:c},"id",l)})}},"Add to Basket"))},M=t(55),Y=t.n(M);var D=function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"home-image"},r.a.createElement(Y.a,{width:1200,height:504,images:[{url:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_Home_v2_en_US_1x._CB429090084_.jpg"},{url:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_45M_v2_1x._CB432458380_.jpg"},{url:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_Sports_en_US_1x._CB431860448_.jpg"},{url:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_Toys_en_US_1x._CB431858161_.jpg"}]})),r.a.createElement("div",{className:"home-row"},r.a.createElement(G,{id:"2031122",title:"gaming-console",price:59,image:"https://m.media-amazon.com/images/I/41kaOFDXzSL._AC_SY200_.jpg",rating:4.5}),r.a.createElement(G,{id:"2031123",title:"headphones",price:20.99,image:"https://m.media-amazon.com/images/I/51HzG7dwAHL._AC_SY200_.jpg",rating:3})),r.a.createElement("div",{className:"home-row"},r.a.createElement(G,{id:"2031124",title:"How-to-influence-people",price:4.99,image:"https://images-na.ssl-images-amazon.com/images/I/718%2Bbq5ApRL._AC_SY220_.jpg",rating:4.5}),r.a.createElement(G,{id:"2031125",title:"Alarm-clock",price:15,image:"https://m.media-amazon.com/images/I/41gT9mzRM8L._AC_SY200_.jpg",rating:4}),r.a.createElement(G,{id:"2031127",title:"usb-cable",price:5.99,image:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2019/July/amazonbasics_520x520._SY304_CB442725065_.jpg",rating:3.5})),r.a.createElement("div",{className:"home-row"},r.a.createElement(G,{id:"2031128",title:"alexa",price:48.99,image:"https://m.media-amazon.com/images/I/6182S7MYC2L._AC_UY218_.jpg",rating:4.9}))))},R=(t(95),t(96),t(37)),U=t(17),W=function(e){return e.reduce((function(e,a){return a.price+e}),0)},$=function(e,a){switch(a.type){case"ADD-TO-BASKET":return Object(U.a)(Object(U.a)({},e),{},{basket:[].concat(Object(R.a)(e.basket),[a.item])});case"Remove-basket":var t=e.basket.findIndex((function(e){return e.id===a.id})),n=Object(R.a)(e.basket);return t>=0?n.splice(t,1):console.warn("can't remove an item ".concat(a.id)),Object(U.a)(Object(U.a)({},e),{},{basket:n});case"Set-user":var r=a.user.email,c=r.split("@",1);return Object(U.a)(Object(U.a)({},e),{},{user:a.user,name:c,email:r});case"Empty_basket":return Object(U.a)(Object(U.a)({},e),{},{basket:[]});default:return e}};var V=function(){var e=Object(p.f)(),a=v(),t=Object(s.a)(a,2),n=t[0].basket,c=(t[1],n.reduce((function(e,a){return e+a.price}),0));return r.a.createElement("div",{className:"subtotal"},r.a.createElement(B.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Subtotal (",n.length," items): ",r.a.createElement("strong",null,c)),r.a.createElement("small",{className:"subtotal__gift"},r.a.createElement("input",{type:"checkbox"})," This order contains a gift"))},decimalScale:2,value:W(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{onClick:function(a){return e.push("/Payment")}},"Proceed to Checkout"))};var J=function(){return r.a.createElement("div",{className:"checkout"},r.a.createElement("div",{className:"checkout-left"},r.a.createElement("img",{className:"checkout-ad",src:"https://images-na.ssl-images-amazon.com/images/G/01/AmazonExports/Fuji/2020/May/Hero/Fuji_TallHero_Computers_1x._CB432469755_.jpg",alt:""}),r.a.createElement("div",{className:"checkout-title"},"Your shopping Basket"),r.a.createElement(T,null)),r.a.createElement("div",{className:"checkout-right"},r.a.createElement(V,null)))},Q=(t(97),t(56));var K=function(){var e=v(),a=Object(s.a)(e,2),t=(a[0].user,a[1]),n=Object(p.f)();return r.a.createElement("div",null,r.a.createElement(f.GoogleLogin,{clientId:"889550157625-vrj66msd63id05a4oolov7hgtdhgijae.apps.googleusercontent.com",buttobText:"Login With Google",onSuccess:function(e){t({type:"Set-user",user:e.profileObj}),n.push("/"),function(e){var a=1e3*(e.tokenObj.expires_in||3300),t=function(){var n=Object(O.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reloadAuthResponse();case 2:r=n.sent,a=1e3*(r.expires_in||3300),console.log("newAuthRes:",r),localStorage.setItem("authToken",r.id_token),setTimeout(t,a);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();setTimeout(t,a)}(e),Object(Q.a)("user"),e.profileObj.name},onFailure:function(e){console.log("[Login Failed] res",e),window.location.reload("/Login")},cookiePolicy:"single_host_origin",style:{marginTop:"100px"},isSignedIn:!0}))};var X=function(){var e=Object(p.f)(),a=Object(n.useState)(""),t=Object(s.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),m=i[0],u=i[1],d=v(),g=Object(s.a)(d,2);return g[0].user,g[1],r.a.createElement("div",{className:"login"},r.a.createElement(E.b,{to:"/"},r.a.createElement("img",{className:"login-logo",src:"https://i.pinimg.com/originals/08/5f/d8/085fd8f7819dee3b716da73d3b2de61c.jpg",alt:""})),r.a.createElement("form",null,r.a.createElement("div",{className:"login-container"},r.a.createElement("h2",null,"Sign In"),r.a.createElement("small",null,"Email"),r.a.createElement("input",{type:"email",value:c,onChange:function(e){return l(e.target.value)},placeholder:"Enter your email"}),r.a.createElement("small",null,"Password"),r.a.createElement("input",{type:"password",value:m,onChange:function(e){return u(e.target.value)},placeholder:"Enter your password"}),r.a.createElement("button",{onClick:function(a){a.preventDefault(),S.signInWithEmailAndPassword(c,m).then((function(a){a&&e.push("/")})).catch((function(e){return alert(e.message)}))}},"Login"),r.a.createElement("small",null,"If you don't have an account?"),r.a.createElement("button",{type:"submit",onClick:function(a){a.preventDefault(),S.createUserWithEmailAndPassword(c,m).then((function(a){a&&e.push("/")})).catch((function(e){return alert(e.message)}))},className:"create-acc"},"Create account"),r.a.createElement(K,null))))},q=(t(98),t(22)),Z=t(57),ee=t.n(Z).a.create({basURL:"https://us-central1-clone1-4e27e.cloudfunctions.net/api"});var ae=function(){var e=v(),a=Object(s.a)(e,2),t=a[0],c=t.basket,l=t.user,o=(t.name,a[1]),i=Object(q.useStripe)(),m=Object(q.useElements)(),u=c.reduce((function(e,a){return e+a.price}),0),d=Object(p.f)(),g=Object(n.useState)(null),h=Object(s.a)(g,2),f=h[0],b=h[1],_=Object(n.useState)(!0),k=Object(s.a)(_,2),N=k[0],S=k[1],w=Object(n.useState)(""),x=Object(s.a)(w,2),C=x[0],A=x[1],I=Object(n.useState)(!1),z=Object(s.a)(I,2),L=z[0],F=z[1],H=Object(n.useState)(!0),P=Object(s.a)(H,2),G=P[0],M=P[1];Object(n.useEffect)((function(){(function(){var e=Object(O.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({method:"post",url:"https://us-central1-clone1-4e27e.cloudfunctions.net/api/payments/create?total=".concat(100*W(c))});case 2:a=e.sent,M(a.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var Y=function(){var e=Object(O.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),A(!0),e.next=4,i.confirmCardPayment(G,{payment_method:{card:m.getElement(q.CardElement)}}).then((function(e){var a=e.paymentIntent;y.collection("users").doc(null===l||void 0===l?void 0:l.email).collection("orders").doc(a.id).set({basket:c,amount:a.amount,created:a.created}),F(!0),b(null),A(!1),o({type:"Empty_basket"}),d.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"payment"},r.a.createElement("div",{className:"payment-container"},r.a.createElement("h1",null,"Checkout ",r.a.createElement(E.b,{to:"/checkout"}," (",c.length,"items) ")),r.a.createElement("div",{className:"payment-section"},r.a.createElement("div",{className:"payment-title"},r.a.createElement("h3",null," Delivery address ")),r.a.createElement("div",{className:"del-add"},r.a.createElement("p",null," ",r.a.createElement("label",null," Email: ",l?l.email:"Guest"," ")),r.a.createElement("p",null," ",r.a.createElement("label",null," Address: 123, Paradise Apt. ")),r.a.createElement("p",null," Bandra, Mumbai - 23445 "))),r.a.createElement("div",{className:"payment-section"},r.a.createElement("div",{className:"payment-title"},r.a.createElement("h3",null," Review Items to deliver ")),r.a.createElement("div",{className:"payment-items"},r.a.createElement(T,null))),r.a.createElement("div",{className:"payment-section"},r.a.createElement("div",{className:"payment-title"},r.a.createElement("h3",null," Payment method ")),r.a.createElement("div",{className:"payment-method"},r.a.createElement("form",{onClick:Y},r.a.createElement(q.CardElement,{onChange:function(e){S(e.empty),b(e.error?e.error.message:"")}}),r.a.createElement("div",{className:"payment-price"},r.a.createElement(B.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null," Order Total(",c.length,"items): ",r.a.createElement("strong",null," ",u," ")))," ")},decimalScale:2,value:W(c),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{disabled:C||N||L},r.a.createElement("span",null," ",C?r.a.createElement("p",null," Processing "):"Buy Now"))),f&&r.a.createElement("div",null," ",f," ")," ")," ")," ")," "),"  ")},te=t(58),ne=Object(te.a)("pk_test_51HUuljARgZFW9hkV5BlQCzMc3V2noTXoYWOcr20gRvakltS1BMIW41z1t9uVJYAHvCSFlQUcVXLPlBp3iQw5Boca00V1CmsNtR");var re=function(){var e=v(),a=Object(s.a)(e,2);Object(o.a)(a[0]);var t=a[1];return Object(n.useEffect)((function(){S.onAuthStateChanged((function(e){e&&t({type:"Set-user",user:e})}))}),[]),r.a.createElement(E.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/orders"},r.a.createElement(H,null),r.a.createElement(F,null)),r.a.createElement(p.a,{path:"/Login"},r.a.createElement(X,null)),r.a.createElement(p.a,{path:"/checkout"},r.a.createElement(H,null),r.a.createElement(J,null)),r.a.createElement(p.a,{path:"/Payment"},r.a.createElement(H,null),r.a.createElement(q.Elements,{stripe:ne},r.a.createElement(ae,null))),r.a.createElement(p.a,{path:"/"},r.a.createElement(H,null),r.a.createElement(D,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,{initialState:{basket:[]},reducer:$},r.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,a,t){},60:function(e,a,t){e.exports=t(116)},65:function(e,a,t){},66:function(e,a,t){},82:function(e,a,t){},88:function(e,a,t){},90:function(e,a,t){},91:function(e,a,t){},95:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){},98:function(e,a,t){}},[[60,1,2]]]);
//# sourceMappingURL=main.2e1d3186.chunk.js.map